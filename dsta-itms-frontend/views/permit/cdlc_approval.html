<div class="row page-header">
	<h3>Cdlc Conversion Approval</h3>
</div>
<div class="row page-body">
	<div class="col-xs-12">
		<decide-button yes="Approve" hold="Hold" no="Reject" to-all="true" ng-model="allDecision" decision-count="count" ng-click="decideAll(allDecision)" />
	<button type="button" class="btn btn-primary navbar-btn" ng-disabled="count < 1" ng-click="confirmDialog('Are you sure you want to approve and/or reject and/or hold the Cdlc Conversion?', confirm)">
		Confirm Decision <span ng-show="count > 0"> for {{count}} CDL Conversion</span>
	</button>
		<br><br>
	<table st-table="records" st-pipe="paginate" class="table table-striped table-bordered table-responsive table-condensed small">
			<tr>
				<th no-sort width="2%" class="text-center">#</th>
				<th sort property="applicant.nricNo" width="48%">Application</th>
				<th no-sort colspan="2">Application Details</th>
			</tr>
			<tr ng-repeat="record in records">
				<td class="text-right">{{$index + 1}}.</td>
				<td>
					<div>
						<a href="index2.html#/cdlc/{{record.id}}">{{record.applicationNo}}</a> ({{record.nricNo}})<br> <strong><big>{{record.name}}</big></strong><br> <em>{{record.submissionInfo}}</em><br>
					</div>
					<div>
					<decide-button yes="Approve" hold="Hold" no="Reject" ng-model="decisions[record.id].decision" decision-count="$parent.count" />
						<div ng-if="decisions[record.id].decision == 'NO'||decisions[record.id].decision == 'HOLD'"  style="padding-top: 5px">
								<input type="text" class="form-control" ng-show="decisions[record.id].decision == 'NO'|| decisions[record.id].decision == 'HOLD'" ng-model="decisions[record.id].decisionReason" placeholder="Reasons for Reject/Hold"/>


						</div>
					</div>
				</td>
				<td>
					<strong>CDL Class: </strong>{{record.cdlClass}}<br>
					<strong>Unit: </strong>{{record.unit}}<br>
					<strong>Age: </strong>{{record.age}}<br>
					<strong>ORD: </strong>{{record.ord}}<br>
					<strong>Demerit Points: </strong>{{record.demeritPts}}<br>
					<strong>Existing CDL No.: </strong>{{record.existingCDL}}<br>
				</td>
				<td>
					<strong>Recommended On </strong>{{record.recommendedOn}}<br>
					<strong>Recommended by </strong><a uib-tooltip="{{record.recommendedBy}}" tooltip-placement="left">{{record.recommendedByNric}}</a><br>
					<strong>Processed on </strong>{{record.processedOn}} <strong>by </strong><a uib-tooltip="{{record.processedBy}}" tooltip-placement="left">{{record.processedByNric}}</a><br>
					<strong>TP Screened Date: </strong>{{record.tpScreenDate}}<br>	
					<strong>TP Screened OutCome: </strong>{{record.tpScreeningOutcome}}<br>
					<strong>TP Screened Remarks: </strong>{{record.tpScreenRemarks}}<br>
					<strong>Remarks: </strong>{{record.remarks}}<br>
					<strong>Status: </strong>{{record.status}}<br>
				</td>
			</tr>
	</table>
	<div class="modal fade" id="confirmSubmitModal" tabindex="-1">
	<div class="modal-dialog" style="width: 400px">
		<div class="modal-content">
			<div class="modal-header">
				<button class="close" data-dismiss="modal">&times;</button>
				<h4 class="modal-title">Confirm?</h4>
			</div>
			<div class="modal-body">
				Proceed to approve CDL Conversion applications?
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
				<button type="button" class="btn btn-primary" data-dismiss="modal">Submit</button>
			</div>
		</div>
	</div>
</div>
</div>
