<div class="row page-header">
	<h3>Search Accidents</h3>
</div>

<div class="row page-body">
	<div class="panel panel-default">
		<div class="panel-body">
			<div style="width:130px;position:absolute;right:20px;z-index:998">
				<button type="submit" class="btn btn-block btn-primary" ng-click="setSelectedPage('tender.html')">Search</button>
				<br />
                <br />
                <a href="" ng-click="taskSearch.isCollapsed = !taskSearch.isCollapsed" class="pull-right">Advanced Search...</a>
			</div>
			
			<div class="col-sm-12" style="padding-right:160px">
				<form class="form-horizontal">
					<div class="form-group">
                        <label class="col-sm-2 control-label">NRIC No. / Name</label>
                        <div class="col-sm-4">
							<input class="form-control" id="driverNric" placeholder="NRIC No. or Name" value="">
						</div>
                        <label class="col-sm-2 control-label">Appointment</label>
                        <div class="col-sm-4">
                            <input class="form-control"/>
                        </div>
					</div>
                    <div class="form-group" style="padding-right:0px" uib-collapse="taskSearch.isCollapsed">
                        <hr>
                        <div class="col-sm-1">
                            <ul class="nav nav-tabs tabs-left">
                                <li class="active"><a ng-click="vTab='P'" data-toggle="tab">Profile</a></li>
                                <li><a ng-click="vTab='S'" data-toggle="tab">Skills</a></li>
                                <li><a ng-click="vTab='M'" data-toggle="tab">Mileage</a></li>
                                <li><a ng-click="vTab='R'" data-toggle="tab">Rewards</a></li>
                                <li><a ng-click="vTab='O'" data-toggle="tab">Demerit Points</a></li>
                            </ul>
                        </div>
                        <div class="col-sm-11">
                            <div class="tab-content" ng-if="vTab=='P'">
                            	<div class="form-group">
	                                <label class="col-sm-2 control-label">Hub</label>
			                        <div class="col-sm-4">
			                            <select class="form-control">
			                            	<option></option>
			                                <option>HUB EAST</option>
			                                <option>HUB WEST</option>
			                                <option>HUB NORTH</option>
			                                <option>HUB CENTRAL</option>
			                            </select>
			                        </div>
			                        <label class="col-sm-2 control-label">Attachment Node</label>
                                    <div class="col-sm-4">
                                        <select class="form-control" ng-model="taskSearch.node" required ng-options="node.id as node.name for node in nodes">
			                                <option></option>
			                            </select>
                                    </div>
                                </div>
                                <div class="form-group">
                                	<label class="col-sm-2 control-label">Node</label>
			                        <div class="col-sm-4">
			                            <select class="form-control" ng-model="taskSearch.node" required ng-options="node.id as node.name for node in nodes">
			                                <option></option>
			                            </select>
			                        </div>
			                        <label class="col-sm-2 control-label">Date of Enlistment</label>
                                    <div class="col-sm-4">
                                        <div class='input-group valueColumn date'>
                                            <input daterangebox value="" class="form-control"/>
                                            <label class="input-group-addon">
                                                <span class="glyphicon glyphicon-calendar"></span>
                                            </label>
                                        </div>
                                    </div>   
                                </div>
                                <div class="form-group">
                                	<label class="col-sm-2 control-label">Ops Tag Unit</label>
			                        <div class="col-sm-4">
			                             <select class="form-control">
											<option></option>
											<option ng-repeat="unit in units" value="{{unit.id}}">{{unit.name}}</option>
										</select>
			                        </div>
			                        <label class="col-sm-2 control-label">ORD Date</label>
                                    <div class="col-sm-4">
                                        <div class='input-group valueColumn date'>
                                            <input daterangebox value="" class="form-control"/>
                                            <label class="input-group-addon">
                                                <span class="glyphicon glyphicon-calendar"></span>
                                            </label>
                                        </div>
                                    </div>   
                                </div>
                                <div class="form-group">
                                	<label class="col-sm-2 control-label">Ops Tag Sub-Unit</label>
			                        <div class="col-sm-4">
			                            <input class="form-control"/>
			                        </div>
			                        <label class="col-sm-2 control-label">Security CAT</label>
			                        <div class="col-sm-4">
			                        	<select class="form-control">
			                                <option></option>
			                                <option ng-repeat="securityCategory in securityCategories" value="{{securityCategory.code}}">{{securityCategory.code}}</option>
			                            </select>
			                        </div>
                                </div>
                                <div class="form-group">
                                	<label class="col-sm-2 control-label">Platoon</label>
			                        <div class="col-sm-4">
			                            <input class="form-control"/>
			                        </div>
			                        <label class="col-sm-2 control-label">G6PD</label>
			                        <div class="col-sm-4">
	                                	<select class="form-control">
			                                <option></option>
			                                <option>Yes</option>
			                                <option>No</option>
			                            </select>
			                        </div>  
                                </div>
                                <div class="form-group">
                                	<label class="col-sm-2 control-label">Section</label>
			                        <div class="col-sm-4">
			                            <input class="form-control"/>
			                        </div>
			                        <label class="col-xs-2 control-label">Search Whole of SAF</label>
			                        <div class="col-xs-4">
			                            <div class="radio radio-inline">
			                                <label>
			                                    <input type="radio" name="bufferToggle">Yes 
			                                </label>
			                                <label>
			                                    <input type="radio" name="bufferToggle" checked="true">No 
			                                </label>
			                            </div>
			                        </div>
                                </div>
                            </div>
                            <div class="tab-content" ng-if="vTab=='S'">
                            	<div class="form-group">
                                    <label class="col-sm-3 control-label">Vehicle Type</label>
                                    <div class="col-sm-3">
                                        <select tagbox multiple="true" class="form-control">
											<option ng-repeat="vehicleType in vehicleTypes" value="{{vehicleType.id}}">{{vehicleType.name}}</option>
                                        </select>
                                    </div>
                                    <label class="col-sm-3 control-label">Tow Type</label>
                                    <div class="col-sm-3">
                                        <select tagbox multiple="true" class="form-control">
											<option ng-repeat="towType in towTypes" value="{{towType.id}}">{{towType.name}}</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="col-sm-3 control-label">Driving CAT</label>
                                    <div class="col-sm-3">
                                        <select class="form-control">
                                            <option></option>
                                            <option ng-repeat="cdDrivingCategory in cdDrivingCategories">{{cdDrivingCategory.name}}</option>
                                        </select>
                                    </div>
                                    <label class="col-sm-3 control-label">Soldier Proficiency</label>
                                    <div class="col-sm-3">
                                        <select tagbox multiple="true" class="form-control">
                                            <option></option>
											<option ng-repeat="proficiency in proficiencies1" value="{{proficiency.id}}">{{proficiency.name}}</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="col-sm-3 control-label">SAF Driving Permit No.</label>
                                    <div class="col-sm-3">
                                    	<input class="form-control"/>
                                    </div>
                                    <label class="col-sm-3 control-label">SAF Driving Permit Type</label>
                                    <div class="col-sm-3">
                                    	<select class="form-control">
                                            <option></option>
                                            <option>QDL</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="col-sm-3 control-label">SAF Driving Class</label>
                                    <div class="col-sm-3">
                                    	<select class="form-control">
                                            <option></option>
                                            <option ng-repeat="vehClass in vehClasses" value="{{vehClass.id}}">{{vehClass.name}}</option>
                                        </select>
                                    </div>
                                    <label class="col-sm-3 control-label">SAF Driving Permit Status</label>
                                    <div class="col-sm-3">
                                    	<select class="form-control">
                                            <option></option>
                                            <option>VALID</option>
                                            <option>INVALID</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="form-group">
                                	<label class="col-sm-3 control-label">CDL Licence No.</label>
                                    <div class="col-sm-3">
                                    	<input class="form-control"/>
                                    </div>
                                   	<label class="col-sm-3 control-label">CDL Licence Status</label>
                                    <div class="col-sm-3">
                                    	<select class="form-control">
                                            <option></option>
                                            <option>VALID</option>
                                            <option>INVALID</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="form-group">
                                	<label class="col-sm-3 control-label">CDL Licence Class</label>
                                    <div class="col-sm-3">
                                    	<select class="form-control">
                                            <option></option>
                                            <option ng-repeat="vehClass in vehClasses" value="{{vehClass.id}}">{{vehClass.name}}</option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                            <div class="tab-content" ng-if="vTab=='M'">
                               <div class="form-group">
                               		<label class="col-sm-3 control-label">Date Range</label>
                                    <div class="col-sm-3">
                                    	<input daterangebox value="" class="form-control"/>
                                    </div>
                                    <div class="form-group">
                                	<label class="col-sm-3 control-label">Task ID</label>
                                    <div class="col-sm-3">
                                        <input class="form-control"/>
                                    </div>
                                </div>
                                </div>
                                <div class="form-group">
                               		<label class="col-sm-3 control-label">Vehicle Type</label>
                                    <div class="col-sm-3">
                                    	<select class="form-control">
                                    		<option></option>
                                    		<option ng-repeat="vehicleType in vehicleTypes" value="{{vehicleType.id}}">{{vehicleType.name}}</option>
                                    	</select>
                                    </div>
                                    <label class="col-sm-3 control-label">Vehicle Type Mileage</label>
                                    <div class="col-sm-3">
                                        <input class="form-control"/>
                                    </div>
                                </div>
                                <div class="form-group">
                               		<label class="col-sm-3 control-label">Vehicle Licence Class</label>
                                    <div class="col-sm-3">
                                    	<select class="form-control">
                                    		<option></option>
                                    		<option ng-repeat="vehClass in vehClasses" value="{{vehClass.id}}">{{vehClass.name}}</option>
                                    	</select>
                                    </div>
                                    <label class="col-sm-3 control-label">Vehicle Licence Class Mileage</label>
                                    <div class="col-sm-3">
                                        <input class="form-control"/>
                                    </div>
                                </div>
                            </div>
                            <div class="tab-content" ng-if="vTab=='R'">
                                <div class="form-group">
                                    <label class="col-sm-3 control-label">Total Mileage Accumulated</label>
                                    <div class="col-sm-3">
                                        <input class="form-control"/>
                                    </div>
                                    <label class="col-sm-3 control-label">Last TA Date</label>
                                    <div class="col-sm-3">
                                        <input datebox class="form-control"/>
                                    </div>
                                </div>
                                
                                <div class="form-group">
                                    <label class="col-sm-3 control-label">Mileage Since Last TA</label>
                                    <div class="col-sm-3">
                                        <input class="form-control"/>
                                    </div>
                                    <label class="col-sm-3 control-label">Mileage to Next Incentive</label>
                                    <div class="col-sm-3">
                                        <input class="form-control"/>
                                    </div>
                                </div>
                                
                                <div class="form-group">
                                    <label class="col-sm-3 control-label">Mileage to Safety & Courteous Badge</label>
                                    <div class="col-sm-3">
                                        <input class="form-control"/>
                                    </div>
                                    <label class="col-sm-3 control-label">Mileage to CDL Conversion</label>
                                    <div class="col-sm-3">
                                        <input class="form-control"/>
                                    </div>
                                </div>
                                                                
                                <div class="form-group">
                                    <label class="col-sm-3 control-label">Rewards Type</label>
                                    <div class="col-sm-3">
                                        <select tagbox class="form-control" multiple="true">
                                            <option>1K Incentive</option>
                                            <option>3K Incentive</option>
                                            <option>CDL Conversion</option>
                                            <option>Safety & Courteous Badge</option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                            <div class="tab-content" ng-if="vTab=='O'">
                            	<div class="form-group">
                            		<label class="col-sm-3 control-label">Offence Type</label>
                                    <div class="col-sm-3">
                                    	<select class="form-control">
                                            <option></option>
											<option ng-repeat="offenceType in offenceTypes" value="{{offenceType.id}}">{{offenceType.name}}</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="form-group">
									<label class="col-sm-3 control-label">Demerit Points More Than</label>
                                    <div class="col-sm-3">
                                        <input type="text" class="form-control">
                                    </div>
                                    <label class="col-sm-3 control-label">Demerit Points Less Than</label>
                                    <div class="col-sm-3">
                                        <input type="text" class="form-control">
                                    </div>                                    
                                </div>
                            	<div class="form-group">
                            		<label class="col-sm-3 control-label">Offence Committed</label>
                                    <div class="col-sm-3">
                                        <input class="form-control" type="text"/>
                                    </div>
                                    <label class="col-sm-3 control-label">Offence Location</label>
                                    <div class="col-sm-3">
                                        <input type="text" class="form-control">
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="col-sm-3 control-label">Offence Issued On</label>
                                     <div class="col-sm-3">
                                        <input daterangebox class="form-control"/>
                                    </div>
                                    <label class="col-sm-3 control-label">Offence Issued By</label>
                                     <div class="col-sm-3">
                                        <select class="form-control">
                                            <option></option>
                                            <option>TP</option>
                                            <option>MP</option>
                                            <option>LTA</option>
                                            <option>URA</option>
                                            <option>OTHERS</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="col-sm-3 control-label">Vehicle No.</label>
                                     <div class="col-sm-3">
                                        <input class="form-control" type="text"/>
                                    </div>
                                    <label class="col-sm-3 control-label">Vehicle Type</label>
                                     <div class="col-sm-3">
                                        <select class="form-control">
											<option></option>
											<option ng-repeat="vehicleType in vehicleTypes" value="{{vehicleType.id}}">{{vehicleType.name}}</option>
										</select>
                                    </div>
                                </div>
                            </div>
                        </div>
					</div>
				</form>
			</div>
		</div>
	</div>
</div>

<style>
	.status {
		color: blue;
		font-weight: bold;
	}
	.pagination>li.pagination-page>a, .pagination>li.pagination-page>span {
		width: 3em;
		text-align: center;
	}
    .select2-choices{
        display:-webkit-inline-box;
    }
</style>

<div class="row">
	<div class="col-xs-12">
		<uib-pagination total-items="bigTotalItems" ng-model="bigCurrentPage" max-size="maxSize" class="pagination-sm" boundary-links="true" boundary-link-numbers="true" rotate="false"></uib-pagination>

		<table class="table table-striped table-bordered table-responsive table-condensed small">
			<tr>
				<th width="15px" class="text-center"><input type="checkbox" ng-model="checkboxes.checked" id="select_all" value=""></th>
				<th width="80px">NRIC</th>
				<th>Name</th>
				<th>Appointment</th>
				<th>Node</th>
				<th>Attachment<br>Node</th>
				<th>Ops Tag<br>Unit</th>
				<th>Ops Tag<br>Sub-Unit</th>
				<th>Driving CAT</th>
				<th width="50px">Total Mileage</th>
				<th width="70px">Mileage to Incentive</th>
				<th width="80px">Mileage to S&C Badge</th>
				<th width="70px">Mileage to CDL</th>
				<th width="50px">Demerit Points</th>
			</tr>
			<tr ng-repeat="operator in operators">
				<td class="text-center"><input type="checkbox"></td>
				<td><a href="#/accident">{{operator.nric}}</a></td>
				<td>{{operator.name}}</td>
				<td>{{operator.appointment}}</td>
				<td>{{operator.node}}</td>
				<td>{{operator.attachmentNode}}</td>
				<td>{{operator.opsTagUnit}}</td>
				<td>{{operator.opsTagSubUnit}}</td>
				<td>{{operator.drivingCAT}}</td>
				<td>{{operator.totalMileage}}</td>
				<td>{{operator.mileageToIncentive}}</td>
				<td>{{operator.mileageToBadge}}</td>
				<td>{{operator.mileageToCDL}}</td>
				<td>{{operator.demeritPoints}}</td>
			</tr>
		</table>
<!--		<uib-pager total-items="totalItems" ng-model="currentPage"></uib-pager>-->
		<uib-pagination total-items="bigTotalItems" ng-model="bigCurrentPage" max-size="maxSize" class="pagination-sm" boundary-links="true" boundary-link-numbers="true" rotate="false"></uib-pagination>
        
        <div>
			<div class="dropup">
				<button class="btn btn-default btn-xs dropdown-toggle" type="button" id="dropdownMenu2" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
			    	Batch Action...
			    	<span class="caret"></span>
			  	</button>
			  	<ul class="dropdown-menu" aria-labelledby="dropdownMenu2">
				    <li><a href="" data-toggle="modal" data-target="#nodeBatchUpdateModal">Update Node</a></li>
				    <li><a href="" data-toggle="modal" data-target="#nodeBatchUpdateModal">Update Ops Tag Unit</a></li>
				    <li><a href="" data-toggle="modal" data-target="#nodeBatchUpdateModal">Update Ops Tag Sub-Unit</a></li>
				    <li><a href="" data-toggle="modal" data-target="#nodeBatchUpdateModal">Update Platoon</a></li>
				    <li><a href="" data-toggle="modal" data-target="#nodeBatchUpdateModal">Update Section</a></li>
				    <li role="separator" class="divider"></li>
				    <li><a href="" data-toggle="modal" data-target="#vehFamBatchUpdateModal">Recommend Vehicle Familiarisation</a></li>
				    <li><a href="" data-toggle="modal" data-target="#vehFamBatchUpdateModal">Recommend Driving Category</a></li>
				    <li><a href="" data-toggle="modal" data-target="#vehFamBatchUpdateModal">Recommend Operation Proficiency</a></li>
				    <li><a href="" data-toggle="modal" data-target="#vehFamBatchUpdateModal">Recommend Military Driving Permit</a></li>
				    <li role="separator" class="divider"></li>
				    <li><a href="" data-toggle="modal" data-target="#vehFamBatchUpdateModal">Submit Reward</a></li>
			  	</ul>
			</div>
			<br>
        </div>
	</div>
</div>

<div class="modal fade" id="nodeBatchUpdateModal" tabindex="-1" role="dialog">
	<div class="modal-dialog" style="width:400px">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
				<h4 class="modal-title">Update Node by Batch</h4>
			</div>
			<div class="modal-body">
				<div class="container-fluid">
					<form class="form-horizontal">
						<div class="form-group">
							<p>54 transport operators selected for batch update of Node.</p>
						</div>
						<div class="form-group">
							<label class="col-sm-2 control-label">Node</label>
				            <div class="col-sm-10">
				                <select class="form-control" ng-model="updateModal.node" ng-options="node.id as node.name for node in nodes">
				                    <option></option>
				                </select>
				            </div>		
						</div>
					</form>
				</div>
	        </div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
				<button type="button" class="btn btn-primary" data-dismiss="modal" ng-click="go('/operators')">Submit</button>
			</div>
		</div>
	</div>
</div>

<div class="modal fade" id="vehFamBatchUpdateModal" tabindex="-1" role="dialog">
	<div class="modal-dialog" style="width: 600px">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-label="Close">
					<span aria-hidden="true">&times;</span>
				</button>
				<h4 class="modal-title">Recommend Vehicle Familiarisation by Batch</h4>
			</div>
			<div class="modal-body">
				<div class="container-fluid">
					<form class="form-horizontal">
						<div class="form-group">
							<p>54 transport operators selected for batch recommendation of Vehicle Familiarisation.</p>
						</div>
						<div class="form-group">
							<label class="col-sm-4 control-label required">Vehicle Type</label>
							<div class="col-sm-8">
								<select vehicletypeselectbox class="form-control" ng-model="vehicleType" required ng-options="vehicleType.id as vehicleType.name for vehicleType in vehicleTypes">
								</select>
							</div>
						</div>
						<div class="form-group">
							<label class="col-sm-4 control-label">Tow Types</label>
							<div class="col-sm-8">
								<select class="form-control">
									<option></option>
									<option ng-repeat="towType in towTypes" value="{{towType.id}}">{{towType.name}}</option>
								</select>
							</div>
						</div>
						<div class="form-group">
							<label class="col-sm-4 control-label">Status</label>
							<div class="col-sm-8">
								<select class="form-control">
									<option>PASS</option>
									<option>FAIL</option>
								</select>
							</div>
						</div>
						<div class="form-group">
							<label class="col-sm-4 control-label">Assessed On</label>
							<div class="col-sm-8">
								<input datebox id="startDate" value="" class="form-control" />
							</div>
						</div>
						<div class="form-group">
							<label class="col-sm-4 control-label required">Assessed By</label>
							<div class="col-sm-8">
								<input type="hidden" ng-model="indentSet.poc"> <input type="text" id="poc1" class="form-control" ng-model="pocName1" placeholder="Name or NRIC No."
									aria-describedby="basic-addon1" autocomplete="off" uib-typeahead="customer as customer.name for customer in customers | filter:$viewValue | limitTo:10"
									typeahead-on-select="onSelectPOC($item)">
							</div>
						</div>
						<div class="form-group">
							<label class="col-sm-4 control-label">Recommended On</label>
							<div class="col-sm-8">
								<input datebox id="startDate" value="" class="form-control" />
							</div>
						</div>
						<div class="form-group">
							<label class="col-sm-4 control-label required">Recommended By</label>
							<div class="col-sm-8">
								<input type="hidden" ng-model="indentSet.poc"> <input type="text" id="poc1" class="form-control" ng-model="pocName1" placeholder="Name or NRIC No."
									aria-describedby="basic-addon1" autocomplete="off" uib-typeahead="customer as customer.name for customer in customers | filter:$viewValue | limitTo:10"
									typeahead-on-select="onSelectPOC($item)">
							</div>
						</div>
					</form>
				</div>
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
				<button type="button" class="btn btn-primary" data-dismiss="modal" ng-click="go('/operator')">Submit</button>
			</div>
		</div>
	</div>
</div>

<script>
    $("#select2OpsProf").select2({
        closeOnSelect:true
    });
    
    $("#select2VehType").select2({
        closeOnSelect:true
    });
    
    $("#select2TowType").select2({
        closeOnSelect:true
    });
</script>