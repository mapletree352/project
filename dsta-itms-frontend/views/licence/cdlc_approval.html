<div class="row page-header">
	<h3>CDL Conversion Approval</h3>
</div>
<div class="row page-body">
	<div class="col-xs-12">
		<div style="position:fixed;background:white;width:100%;z-index:999;margin-top:-9px">
			<button type="button" class="btn btn-primary navbar-btn" data-toggle="modal" data-target="#confirmSubmitModal" ng-disabled="approvalCount<1">
				<span class="glyphicon glyphicon-ok"></span> Submit Approval<span ng-show="approvalCount>0"> for {{approvalCount}} Transport Operators</span>
			</button>
			<button type="button" class="btn btn-default navbar-btn">Clear</button>
		</div>
		<table class="table table-striped table-bordered table-responsive table-condensed small" style="margin-top: 50px">
			<tr>
				<th width="2%" class="text-center">#</th>
				<th width="48%">Application</th>
				<th colspan="2"]>Application Details</th>
			</tr>
			<tr ng-repeat="approveCdlc in approveCdlcs">
				<td class="text-right">{{approveCdlc.id}}.</td>
				<td>
					<div>
						<a href="#/cdlc">{{approveCdlc.applicationID}}</a> ({{approveCdlc.nric}})<br> <strong><big>{{approveCdlc.name}}</big></strong><br> <em>{{approveCdlc.submissionInfo}}</em><br>
					</div>
					<div>
						<cdl-approval-button decision="approveCdlc.approve" ng-click="onApprove(approveCdlc.approve)" />
						<strong ng-if="approveCdlc.approve=='approve'">Collection Date <span class="glyphicon glyphicon-info-sign"	uib-tooltip="WizVision: Assuming Approver will arrange for collection. If Processer is the one, we'll need another state (APPROVED > READY FOR COLLECTION)." />:</strong>
						<input ng-if="approveCdlc.approve=='approve'" placeholder="Collection Date" datebox />
						<div ng-if="approveCdlc.approve=='reject'" style="padding-top: 5px">
							<input type="text" class="form-control" placeholder="Reasons to Hold / Reject"></input>
						</div>
					</div>
				</td>
				<td>
					<strong>CDL Class: </strong>{{approveCdlc.cdlClass}}<br>
					<strong>Unit: </strong>{{approveCdlc.unit}}<br>
					<strong>Age: </strong>{{approveCdlc.age}}<br>
					<strong>ORD: </strong>{{approveCdlc.ord}}<br>
					<strong>Demerit Points: </strong>{{approveCdlc.demeritPts}}<br>
					<strong>Existing CDL No.: </strong>{{approveCdlc.existingCDL}}<br>
				</td>
				<td>
					<strong>Recommended on </strong>{{approveCdlc.recommendedOn}} <strong>by </strong><a uib-tooltip="{{approveCdlc.recommendedBy}}" tooltip-placement="left">S7541221J</a><br>
					<strong>Processed on </strong>{{approveCdlc.processedOn}} <strong>by </strong><a uib-tooltip="{{approveCdlc.processedBy}}" tooltip-placement="left">S7524125A</a><br>
					<strong>Mileage	Checked: </strong>{{approveCdlc.mileageChecked}}<br>
					<strong>TP Screened: </strong>{{approveCdlc.tpScreened}}<br>
					<strong>Classes Eligible: </strong>{{approveCdlc.classesEligible}}<br>
					<strong>Remarks: </strong>{{approveCdlc.remarks}}<br>
				</td>
			</tr>
		</table>

		<uib-pagination total-items="bigTotalItems" ng-model="bigCurrentPage" max-size="maxSize" class="pagination-sm" boundary-links="true" boundary-link-numbers="true" rotate="false"></uib-pagination>
	</div>
</div>

<div class="modal fade" id="confirmSubmitModal" tabindex="-1">
	<div class="modal-dialog" style="width: 400px">
		<div class="modal-content">
			<div class="modal-header">
				<button class="close" data-dismiss="modal">&times;</button>
				<h4 class="modal-title">Confirm?</h4>
			</div>
			<div class="modal-body">
				Proceed to approve CDL Conversion applications?
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
				<button type="button" class="btn btn-primary" data-dismiss="modal">Submit</button>
			</div>
		</div>
	</div>
</div>


<script>
	//	init();
</script>